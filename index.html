<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For My Queen</title>
<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif; }
canvas { display:block; }

#enterScreen{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:black;
  z-index:10;
}

#enterBtn{
  padding:16px 40px;
  font-size:18px;
  border:none;
  border-radius:40px;
  background:#ff4f81;
  color:white;
  cursor:pointer;
}

#ui{
  position:absolute;
  bottom:60px;
  width:100%;
  text-align:center;
  display:none;
  z-index:5;
}

button.choice{
  padding:14px 30px;
  margin:0 20px;
  font-size:16px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  transition:0.3s;
}

#yes{ background:#ff4f81; color:white; }
#yes:hover{ transform:scale(1.08); }

#no{ background:#333; color:white; }

#final{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:100%;
  text-align:center;
  font-size:48px;
  color:#ffd27f;
  display:none;
  z-index:6;
}
</style>
</head>
<body>

<div id="enterScreen">
  <button id="enterBtn">Enter the Universe</button>
</div>

<div id="ui">
  <button id="yes" class="choice">Yes</button>
  <button id="no" class="choice">No</button>
</div>

<div id="final">My Queen Sree ❤️</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_9f3d6d3f60.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/geometries/TextGeometry.js"></script>

<script>

/* ===== Renderer ===== */

const renderer = new THREE.WebGLRenderer({ antialias:true })
renderer.setSize(window.innerWidth, window.innerHeight)
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))
renderer.toneMapping = THREE.ACESFilmicToneMapping
renderer.toneMappingExposure = 1
document.body.appendChild(renderer.domElement)

/* ===== Scene ===== */

const scene = new THREE.Scene()

const camera = new THREE.PerspectiveCamera(
45,
window.innerWidth/window.innerHeight,
0.1,
2000
)
camera.position.set(0,0,180)

/* ===== Post Processing ===== */

const composer = new THREE.EffectComposer(renderer)
composer.addPass(new THREE.RenderPass(scene,camera))

const bloom = new THREE.UnrealBloomPass(
new THREE.Vector2(window.innerWidth,window.innerHeight),
0.5,
0.3,
0.3
)
composer.addPass(bloom)

/* ===== Lighting ===== */

scene.add(new THREE.AmbientLight(0xffffff,0.25))

const light = new THREE.PointLight(0xff6fa5,2,1000)
light.position.set(0,60,80)
scene.add(light)

/* ===== Starfield (Safe Fallback) ===== */

const starGeo = new THREE.SphereGeometry(1000,48,48)
const textureLoader = new THREE.TextureLoader()
let starMat = new THREE.MeshBasicMaterial({ color:0x050510, side:THREE.BackSide })

textureLoader.load(
"https://threejsfundamentals.org/threejs/resources/images/starfield.jpg",
texture=>{
starMat.map = texture
starMat.needsUpdate = true
}
)

const starSphere = new THREE.Mesh(starGeo,starMat)
scene.add(starSphere)

/* ===== Heart ===== */

const heartShape = new THREE.Shape()
heartShape.moveTo(0,0)
heartShape.bezierCurveTo(0,8,-12,18,-22,6)
heartShape.bezierCurveTo(-28,-5,-8,-18,0,-28)
heartShape.bezierCurveTo(8,-18,28,-5,22,6)
heartShape.bezierCurveTo(12,18,0,8,0,0)

const heartGeo = new THREE.ExtrudeGeometry(heartShape,{
depth:10,
bevelEnabled:true,
bevelSegments:20,
bevelSize:2,
bevelThickness:2,
curveSegments:60
})
heartGeo.center()

const heart = new THREE.Mesh(
heartGeo,
new THREE.MeshPhysicalMaterial({
color:0xff2e88,
metalness:0.5,
roughness:0.2,
clearcoat:1
})
)
scene.add(heart)

/* ===== Text ===== */

let textMesh
new THREE.FontLoader().load(
"https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",
font=>{
const geo = new THREE.TextGeometry(
"Will You Be My Girlfriend?",
{
font:font,
size:5,
height:2,
bevelEnabled:true
}
)
geo.center()

textMesh = new THREE.Mesh(
geo,
new THREE.MeshStandardMaterial({ color:0xffc5db })
)
textMesh.position.set(0,80,0)
scene.add(textMesh)

document.getElementById("ui").style.display="block"
}
)

/* ===== Animation ===== */

const clock = new THREE.Clock()
let introProgress = 0

function animate(){
requestAnimationFrame(animate)

const delta = clock.getDelta()
const elapsed = clock.getElapsedTime()

if(introProgress < 1){
introProgress += delta * 0.4
camera.position.z = 180 - introProgress * 110
}

heart.rotation.y += delta * 0.8
heart.rotation.x = Math.sin(elapsed*0.5)*0.05
heart.scale.setScalar(1 + Math.sin(elapsed*1.5)*0.05)

starSphere.rotation.y += delta * 0.05

if(textMesh){
textMesh.position.y = 80 + Math.sin(elapsed)*3
}

composer.render()
}
animate()

/* ===== UI ===== */

document.getElementById("enterBtn").onclick = ()=>{
document.getElementById("music").play().catch(()=>{})
document.getElementById("enterScreen").style.display="none"
}

document.getElementById("yes").onclick = ()=>{
document.getElementById("ui").style.display="none"
document.getElementById("final").style.display="block"
}

document.getElementById("no").onmouseover = ()=>{
const btn = document.getElementById("no")
const padding = 120
btn.style.position="absolute"
btn.style.left = Math.random()*(window.innerWidth-padding)+"px"
btn.style.top = Math.random()*(window.innerHeight-padding)+"px"
}

/* ===== Resize ===== */

window.addEventListener("resize",()=>{
camera.aspect = window.innerWidth/window.innerHeight
camera.updateProjectionMatrix()
renderer.setSize(window.innerWidth,window.innerHeight)
composer.setSize(window.innerWidth,window.innerHeight)
})
</script>
</body>
</html>
