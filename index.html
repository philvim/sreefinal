<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For My Queen</title>
<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif; }
canvas { display:block; }

#enterScreen{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:black;
  z-index:10;
}

#enterBtn{
  padding:16px 40px;
  font-size:18px;
  border:none;
  border-radius:40px;
  background:#ff4f81;
  color:white;
  cursor:pointer;
}

#question{
  position:absolute;
  top:15%;
  width:100%;
  text-align:center;
  font-size:42px;
  color:#ffc5db;
  display:none;
  z-index:4;
}

#ui{
  position:absolute;
  bottom:60px;
  width:100%;
  text-align:center;
  display:none;
  z-index:5;
}

button.choice{
  padding:14px 30px;
  margin:0 20px;
  font-size:16px;
  border:none;
  border-radius:30px;
  cursor:pointer;
  transition:0.3s;
}

#yes{ background:#ff4f81; color:white; }
#yes:hover{ transform:scale(1.08); }

#no{ background:#333; color:white; }

#final{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:100%;
  text-align:center;
  font-size:48px;
  color:#ffd27f;
  display:none;
  z-index:6;
}
</style>
</head>
<body>

<div id="enterScreen">
  <button id="enterBtn">Enter the Moment</button>
</div>

<div id="question">Will You Be My Girlfriend?</div>

<div id="ui">
  <button id="yes" class="choice">Yes</button>
  <button id="no" class="choice">No</button>
</div>

<div id="final">My Queen Sree ❤️</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_9f3d6d3f60.mp3" type="audio/mpeg">
</audio>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
window.addEventListener("DOMContentLoaded", () => {

const renderer = new THREE.WebGLRenderer({ antialias:true })
renderer.setSize(window.innerWidth, window.innerHeight)
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))
renderer.toneMapping = THREE.ACESFilmicToneMapping
renderer.toneMappingExposure = 1.1
document.body.appendChild(renderer.domElement)

const scene = new THREE.Scene()

const camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,2000)
camera.position.set(0,0,160)

scene.add(new THREE.AmbientLight(0xffffff,0.4))

const pinkLight = new THREE.PointLight(0xff4f81,3,1000)
pinkLight.position.set(0,60,80)
scene.add(pinkLight)

/* Starfield */
const starGeo = new THREE.BufferGeometry()
const starCount = 2500
const starPositions = new Float32Array(starCount*3)

for(let i=0;i<starCount*3;i++){
  starPositions[i] = (Math.random()-0.5)*800
}

starGeo.setAttribute("position", new THREE.BufferAttribute(starPositions,3))

const starMat = new THREE.PointsMaterial({
  color:0xffffff,
  size:1,
  transparent:true,
  opacity:0.6
})

const stars = new THREE.Points(starGeo,starMat)
scene.add(stars)

/* Heart */
const heartShape = new THREE.Shape()
heartShape.moveTo(0,0)
heartShape.bezierCurveTo(0,8,-12,18,-22,6)
heartShape.bezierCurveTo(-28,-5,-8,-18,0,-28)
heartShape.bezierCurveTo(8,-18,28,-5,22,6)
heartShape.bezierCurveTo(12,18,0,8,0,0)

const heartGeo = new THREE.ExtrudeGeometry(heartShape,{
depth:10,
bevelEnabled:true,
bevelSegments:16,
bevelSize:2,
bevelThickness:2,
curveSegments:60
})
heartGeo.center()

const heart = new THREE.Mesh(
heartGeo,
new THREE.MeshPhysicalMaterial({
color:0xff2e88,
metalness:0.5,
roughness:0.2,
clearcoat:1
})
)
scene.add(heart)

const clock = new THREE.Clock()
let introProgress = 0

function animate(){
requestAnimationFrame(animate)

const delta = clock.getDelta()
const elapsed = clock.getElapsedTime()

introProgress = Math.min(1, introProgress + delta * 0.5)
camera.position.z = 160 - introProgress * 90

heart.rotation.y += delta * 0.8
heart.rotation.x = Math.sin(elapsed*0.6)*0.05
heart.scale.setScalar(1 + Math.sin(elapsed*1.5)*0.05)

stars.rotation.y += delta * 0.05

renderer.render(scene,camera)
}
animate()

/* Music Fade */
const music = document.getElementById("music")
music.volume = 0

function fadeInAudio(){
  let vol = 0
  const fade = setInterval(()=>{
    if(vol < 1){
      vol += 0.05
      music.volume = vol
    } else {
      clearInterval(fade)
    }
  },200)
}

/* UI Logic */
document.getElementById("enterBtn").addEventListener("click",()=>{
  music.play().then(()=>{ fadeInAudio() }).catch(()=>{})
  document.getElementById("enterScreen").style.display="none"
  document.getElementById("question").style.display="block"
  document.getElementById("ui").style.display="block"
})

document.getElementById("yes").onclick = ()=>{
document.getElementById("ui").style.display="none"
document.getElementById("question").style.display="none"
document.getElementById("final").style.display="block"
}

document.getElementById("no").onmouseover = ()=>{
const btn = document.getElementById("no")
const padding = 120
btn.style.position="absolute"
btn.style.left = Math.random()*(window.innerWidth-padding)+"px"
btn.style.top = Math.random()*(window.innerHeight-padding)+"px"
}

window.addEventListener("resize",()=>{
camera.aspect = window.innerWidth/window.innerHeight
camera.updateProjectionMatrix()
renderer.setSize(window.innerWidth,window.innerHeight)
})

})
</script>
</body>
</html>
