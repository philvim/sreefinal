<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For My Queen</title>

<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif; }

canvas {
  position:fixed;
  top:0;
  left:0;
  z-index:1;
}

#enterScreen{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  background:black;
  z-index:20;
}

#enterBtn{
  padding:18px 48px;
  font-size:20px;
  border:none;
  border-radius:50px;
  background:#ff2e88;
  color:white;
  cursor:pointer;
}

#question{
  position:absolute;
  top:15%;
  width:100%;
  text-align:center;
  font-size:48px;
  color:#ffc5db;
  display:none;
  z-index:15;
}

#ui{
  position:absolute;
  bottom:70px;
  width:100%;
  text-align:center;
  display:none;
  z-index:15;
}

button.choice{
  padding:16px 36px;
  margin:0 25px;
  font-size:18px;
  border:none;
  border-radius:40px;
  cursor:pointer;
}

#yes{ background:#ff2e88; color:white; }
#no{ background:#333; color:white; }

#final{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  width:100%;
  text-align:center;
  font-size:56px;
  color:#ffd27f;
  display:none;
  z-index:25;
}
</style>
</head>
<body>

<div id="enterScreen">
  <button id="enterBtn">Enter the Universe</button>
</div>

<div id="question">Will You Be My Girlfriend?</div>

<div id="ui">
  <button id="yes" class="choice">Yes</button>
  <button id="no" class="choice">No</button>
</div>

<div id="final">My Queen Sree ❤️</div>

<audio id="music" loop preload="auto">
  <source src="https://cdn.pixabay.com/download/audio/2022/10/25/audio_9f3d6d3f60.mp3" type="audio/mpeg">
</audio>

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

<script>
window.addEventListener("DOMContentLoaded", () => {

if(typeof THREE === "undefined"){
  alert("Three.js failed to load.");
  return;
}

/* ===== Renderer ===== */
const renderer = new THREE.WebGLRenderer({ antialias:true })
renderer.setSize(window.innerWidth, window.innerHeight)
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))
renderer.physicallyCorrectLights = true
renderer.outputColorSpace = THREE.SRGBColorSpace
renderer.toneMapping = THREE.ACESFilmicToneMapping
renderer.toneMappingExposure = 1.4
renderer.domElement.style.pointerEvents = "none"
document.body.appendChild(renderer.domElement)

/* ===== Scene ===== */
const scene = new THREE.Scene()

const camera = new THREE.PerspectiveCamera(
50,
window.innerWidth/window.innerHeight,
0.1,
3000
)
camera.position.set(0,0,220)

/* ===== Cinematic Lighting ===== */
scene.add(new THREE.AmbientLight(0xffffff,0.35))

const keyLight = new THREE.PointLight(0xff4f81,4,2000)
keyLight.position.set(0,100,160)
scene.add(keyLight)

const rimLight = new THREE.PointLight(0xffffff,2,1500)
rimLight.position.set(0,-120,-180)
scene.add(rimLight)

const topLight = new THREE.DirectionalLight(0xffffff,1.8)
topLight.position.set(0,200,0)
scene.add(topLight)

/* ===== Deep Space Stars ===== */
const starGeo = new THREE.BufferGeometry()
const starCount = 8000
const starPos = new Float32Array(starCount*3)

for(let i=0;i<starCount*3;i++){
  starPos[i] = (Math.random()-0.5)*2000
}

starGeo.setAttribute("position", new THREE.BufferAttribute(starPos,3))

const starMat = new THREE.PointsMaterial({
  color:0xffffff,
  size:1.5,
  transparent:true,
  opacity:0.9
})

const stars = new THREE.Points(starGeo,starMat)
scene.add(stars)

/* ===== Sparkle Orbit ===== */
const sparkleGeo = new THREE.BufferGeometry()
const sparkleCount = 2000
const sparklePos = new Float32Array(sparkleCount*3)

for(let i=0;i<sparkleCount;i++){
  const angle = Math.random()*Math.PI*2
  const radius = 80 + Math.random()*30
  sparklePos[i*3] = Math.cos(angle)*radius
  sparklePos[i*3+1] = Math.sin(angle)*radius
  sparklePos[i*3+2] = (Math.random()-0.5)*60
}

sparkleGeo.setAttribute("position", new THREE.BufferAttribute(sparklePos,3))

const sparkleMat = new THREE.PointsMaterial({
  color:0xffb6d9,
  size:3,
  transparent:true,
  opacity:0.9
})

const sparkles = new THREE.Points(sparkleGeo,sparkleMat)
scene.add(sparkles)

/* ===== Ultra Detailed Heart ===== */
const heartShape = new THREE.Shape()
heartShape.moveTo(0,0)
heartShape.bezierCurveTo(0,15,-22,35,-40,12)
heartShape.bezierCurveTo(-55,-10,-18,-40,0,-60)
heartShape.bezierCurveTo(18,-40,55,-10,40,12)
heartShape.bezierCurveTo(22,35,0,15,0,0)

const heartGeo = new THREE.ExtrudeGeometry(heartShape,{
  depth:20,
  bevelEnabled:true,
  bevelSegments:40,
  bevelSize:6,
  bevelThickness:6,
  curveSegments:160
})
heartGeo.center()

const heartMaterial = new THREE.MeshPhysicalMaterial({
  color:0xff2e88,
  metalness:0.95,
  roughness:0.05,
  clearcoat:1,
  clearcoatRoughness:0.02,
  reflectivity:1,
  emissive:0x330015,
  emissiveIntensity:0.8
})

const heart = new THREE.Mesh(heartGeo, heartMaterial)
scene.add(heart)

/* ===== Animation ===== */
const clock = new THREE.Clock()

function animate(){
requestAnimationFrame(animate)

const delta = clock.getDelta()
const t = clock.getElapsedTime()

heart.rotation.y += delta*1.2
heart.rotation.x = Math.sin(t*0.6)*0.1
heart.scale.setScalar(1 + Math.sin(t*2)*0.08)

stars.rotation.y += delta*0.05
sparkles.rotation.y += delta*1
sparkles.material.opacity = 0.7 + Math.sin(t*4)*0.3

renderer.render(scene,camera)
}
animate()

/* ===== Audio ===== */
const music = document.getElementById("music")
music.volume = 0.85

/* ===== UI ===== */
const enterBtn = document.getElementById("enterBtn")

enterBtn.addEventListener("click",()=>{
  music.play().catch(()=>{})
  document.getElementById("enterScreen").style.display="none"
  document.getElementById("question").style.display="block"
  document.getElementById("ui").style.display="block"
})

document.getElementById("yes").onclick = ()=>{
  document.getElementById("ui").style.display="none"
  document.getElementById("question").style.display="none"
  document.getElementById("final").style.display="block"
}

document.getElementById("no").onmouseover = ()=>{
  const btn = document.getElementById("no")
  btn.style.position="absolute"
  btn.style.left = Math.random()*(window.innerWidth-200)+"px"
  btn.style.top = Math.random()*(window.innerHeight-200)+"px"
}

window.addEventListener("resize",()=>{
  camera.aspect = window.innerWidth/window.innerHeight
  camera.updateProjectionMatrix()
  renderer.setSize(window.innerWidth,window.innerHeight)
})

})
</script>
</body>
</html>
